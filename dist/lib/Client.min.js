!function(a){"use strict";function b(a){return a=a||"",/\/$/.test(a)?a:a+="/"}var c=a.module("ng.cork.api.client",["ng.cork.util","ng.cork.deep.extend"]),d=a.copy,e=a.isString,f=a.isFunction;c.factory("CorkApiClient",["$injector","$http","corkUtil","corkDeepExtend",function(a,c,g,h){function i(a,b){return/^(http[s]?:)?\/\//.test(b)||(/^\//.test(b)&&(b=b.substring(1)),b=a+b),b}var j=g.isInjectable,k={baseUrl:"/"},l=function(g){var l=this;g=h(d(k),g||{}),g.baseUrl=b(g.baseUrl);var m={};l.middleware=function(a,b){if(!e(a))throw new Error("Invalid middleware name.");if(arguments.length>1){if(m[a])throw new Error('Middleware "'+a+'" is already registered.');if(!f(b)&&!j(b))throw new Error('Invalid middleware "'+a+'".');return m[a]=b,this}if(!m[a])throw new Error('Unknown middleware "'+a+'".');return m[a]};var n={},o={};l.service=function(b,c){if(!e(b))throw new Error("Invalid service name.");if(arguments.length>1){if(n[b])throw new Error('Service "'+b+'" is already registered.');if(e(c))n[b]=function(){return a.get(b)};else{if(!f(c))throw new Error('Invalid factory or configuration for service "'+b+'".');n[b]=c}return this}if(!o[b]){if(!n[b])throw new Error('Unknown service "'+b+'".');o[b]=n[b]()}return o[b]},l.execute=function(a){var b=f(a.url)?a.url(a):a.url;return b=b||"",a.url=i(g.baseUrl,b),c(a)},Object.defineProperty(this,"baseUrl",{get:function(){return g.baseUrl}})};return l}])}(angular);